## Integração Estocástica e a Preservação da Propriedade de Martingale

### Introdução

Como estabelecido na Seção 1.3 do contexto, **martingales** são ferramentas ubíquas em finanças matemáticas [^1]. Eles representam a noção de um *fair game*, onde a melhor predição do valor futuro, dada a informação presente, é o valor atual [^1]. A generalização para **local martingales** [^2] amplia a aplicabilidade desses conceitos, embora introduza sutilezas adicionais. Neste capítulo, aprofundaremos a análise dessas classes de processos estocásticos, focando em como a propriedade de (local) martingale se comporta sob a operação de integração estocástica discreta e sob tempos de parada. Investigaremos o processo integral estocástico $\theta \bullet X$, onde $X$ é um (local) martingale e $\theta$ é um processo **predictable** [^3], [^24]. Este processo integral tem uma interpretação financeira direta como o processo de ganhos descontados $G(\theta)$ associado a uma estratégia de negociação auto-financiável $\varphi = (0, \theta)$ [^19]. Estabeleceremos resultados fundamentais, nomeadamente o Teorema 3.1, o Corolário 3.2 e o Teorema 3.3 apresentados no contexto, que descrevem as propriedades de martingale de $\theta \bullet X$ e do processo parado $X^\tau$.

### Conceitos Fundamentais

#### A Integral Estocástica como um Martingale Local

Iniciamos formalizando os conceitos básicos. Consideramos um espaço de probabilidade filtrado $(\Omega, \mathcal{F}, \mathbb{F}, Q)$, onde $\mathbb{F} = (\mathcal{F}_k)_{k=0,1,...,T}$ é a filtração que representa o fluxo de informação [^1]. Um processo estocástico $X = (X_k)_{k=0,1,...,T}$ $\mathbb{R}^d$-valorado é um **Q-martingale** se for adaptado a $\mathbb{F}$ [^18], $Q$-integrável (i.e., $X_k \in L^1(Q)$ para cada $k$ [^20]), e satisfizer a propriedade de martingale:
$$ E_Q[X_l | \mathcal{F}_k] = X_k \quad Q\text{-a.s. for } k \le l $$
[^1]. Um processo $X$ adaptado, nulo em 0 ($X_0 = 0$ [^23]), é um **local Q-martingale** se existir uma sequência de **stopping times** $(\tau_n)_{n \in \mathbb{N}}$ crescente para $T$ tal que, para cada $n$, o processo parado $X^{\tau_n} = (X_{k \wedge \tau_n})_{k=0,1,...,T}$ [^21] seja um Q-martingale [^2]. Um processo $\theta = (\theta_k)_{k=1,...,T}$ $\mathbb{R}^d$-valorado é dito **predictable** se $\theta_k$ for $\mathcal{F}_{k-1}$-mensurável para cada $k=1,...,T$ [^3], [^24]. A **integral estocástica** (discreta) de $\theta$ com respeito a $X$ é definida como o processo $(\theta \bullet X)_k$ dado por:
$$ (\theta \bullet X)_k := \sum_{j=1}^k \theta_j^T \Delta X_j \quad \text{para } k=0,1,...,T $$
com $(\theta \bullet X)_0 = 0$ [^4]. Quando $X=S$ representa preços de ativos descontados, $\theta \bullet S$ corresponde ao processo de ganhos $G(\theta)$ [^19].

O primeiro resultado central estabelece a natureza de martingale local da integral estocástica.

> **Teorema 3.1:** Suponha que $X = (X_k)_{k=0,1,...,T}$ é um $\mathbb{R}^d$-valued Q-martingale ou local Q-martingale nulo em 0 [^23]. Para qualquer processo $\mathbb{R}^d$-valued predictable $\theta$, a integral estocástica $\theta \bullet X$ é um (real-valued) local Q-martingale nulo em 0. Se $X$ é um Q-martingale e $\theta$ é bounded, então $\theta \bullet X$ é um Q-martingale [^5].

*Prova (Esboço para o caso bounded):* Suponha que $X$ é um Q-martingale e $\theta$ é bounded. O processo $\theta \bullet X$ é claramente adaptado e nulo em 0. Como $\theta$ é bounded e $X_k$ é Q-integrável, $\theta \bullet X_k$ também é Q-integrável [^5]. Para verificar a propriedade de martingale, consideramos a esperança condicional do incremento:
$$ E_Q[(\theta \bullet X)_{k+1} - (\theta \bullet X)_k | \mathcal{F}_k] = E_Q[\theta_{k+1}^T \Delta X_{k+1} | \mathcal{F}_k] $$
Como $\theta$ é predictable, $\theta_{k+1}$ é $\mathcal{F}_k$-mensurável [^24]. Portanto, podemos retirá-lo da esperança condicional:
$$ E_Q[\theta_{k+1}^T \Delta X_{k+1} | \mathcal{F}_k] = \theta_{k+1}^T E_Q[\Delta X_{k+1} | \mathcal{F}_k] $$
Como $X$ é um Q-martingale, $E_Q[\Delta X_{k+1} | \mathcal{F}_k] = E_Q[X_{k+1} - X_k | \mathcal{F}_k] = E_Q[X_{k+1} | \mathcal{F}_k] - X_k = X_k - X_k = 0$ (considerando $X$ como um vetor onde cada componente é um martingale [^22]). Logo,
$$ E_Q[(\theta \bullet X)_{k+1} - (\theta \bullet X)_k | \mathcal{F}_k] = \theta_{k+1}^T \cdot 0 = 0 $$
Isso demonstra que $\theta \bullet X$ satisfaz a propriedade de martingale [^6].
Para o caso geral onde $X$ é um local martingale, a prova envolve o uso de uma sequência localizadora $(\tau_n)_{n \in \mathbb{N}}$ para $X$ e a construção de uma nova sequência localizadora $\tau\'_n = \tau_n \wedge \sigma_n$, onde $\sigma_n := \inf\\{k : |\theta_{k+1}| > n\\} \wedge T$, para mostrar que $\theta \bullet X$ é um local martingale [^7]. $\blacksquare$

Este teorema tem uma interpretação financeira importante: mesmo usando estratégias de negociação complexas (representadas por $\theta$), desde que baseadas apenas em informação passada (predictability), não é possível gerar ganhos previsíveis a partir de um processo de preço que se comporta como um (local) martingale [^13].

#### A Propriedade de Martingale sob Tempos de Parada

Um corolário direto e fundamental do Teorema 3.1 diz respeito ao comportamento de martingales quando parados em um **stopping time**. Um **stopping time** (com respeito a $\mathbb{F}$) é uma variável aleatória $\tau: \Omega \to \\{0, 1, ..., T\\}$ tal que o evento $\\{\tau \le k\\}$ pertence a $\mathcal{F}_k$ para todo $k$ [^8]. Intuitivamente, em cada instante $k$, sabemos se o tempo $\tau$ já ocorreu ou não. O processo **stopped process** $X^\tau$ é definido como $X^\tau_k = X_{k \wedge \tau}$ [^21].

> **Corolário 3.2:** Para qualquer Q-martingale $X$ e qualquer stopping time $\tau$, o stopped process $X^\tau$ é novamente um Q-martingale. Em particular, $E_Q[X_{k \wedge \tau}] = E_Q[X_0]$ para todo $k$ [^10].

*Prova:* Considere o processo $\theta$ definido por $\theta_k = I_{\\{k \le \tau\\}}$. Este processo é $\mathbb{R}$-valorado (ou $\mathbb{R}^d$-valorado se $X$ for $\mathbb{R}^d$-valorado, aplicando-o a uma componente de cada vez ou considerando $\theta_k = (I_{\\{k \le \tau\\}}, ..., I_{\\{k \le \tau\\}})^T$). Para verificar que $\theta$ é predictable, notamos que $\theta_k = I_{\\{\tau \ge k\\}}$. O evento $\\{\tau \ge k\\}$ é o complementar de $\\{\tau \le k-1\\}$. Como $\tau$ é um stopping time, $\\{\tau \le k-1\\} \in \mathcal{F}_{k-1}$, e portanto seu complementar $\\{\tau \ge k\\}$ também pertence a $\mathcal{F}_{k-1}$. Logo, $\theta_k$ é $\mathcal{F}_{k-1}$-mensurável, e $\theta$ é predictable [^9]. Além disso, $\theta$ é claramente bounded (por 1).
A integral estocástica é
$$ (\theta \bullet X)_k = \sum_{j=1}^k I_{\\{j \le \tau\\}} \Delta X_j = \sum_{j=1}^{k \wedge \tau} (X_j - X_{j-1}) = X_{k \wedge \tau} - X_0 $$
Como $X$ é um Q-martingale e $\theta$ é predictable e bounded, pelo Teorema 3.1, $\theta \bullet X = X^\tau - X_0$ é um Q-martingale [^5], [^11]. Como $X_0$ é $\mathcal{F}_0$-mensurável e constante (ou Q-integrável se não for nulo), adicionar $X_0$ preserva a propriedade de martingale. Assim, $X^\tau$ é um Q-martingale [^10]. A propriedade $E_Q[X_{k \wedge \tau}] = E_Q[X_0]$ segue diretamente da definição de martingale aplicada a $X^\tau$ no tempo $k$ com $l=k$ e $k=0$. $\blacksquare$

A interpretação deste corolário é poderosa: a propriedade de *fair game* de um martingale não pode ser quebrada por uma estratégia de parada baseada na informação disponível até o momento da parada [^12].

#### Condições para a Integral Estocástica ser um Martingale Verdadeiro

O Teorema 3.1 garante que $\theta \bullet X$ é um local martingale quando $X$ é um local martingale (ou mesmo um martingale verdadeiro se $\theta$ não for bounded). Em muitas aplicações financeiras, particularmente relacionadas à ausência de arbitragem e precificação de derivativos, é crucial saber quando essa integral estocástica é, de fato, um verdadeiro Q-martingale, e não apenas local. Uma condição suficiente importante para isso em tempo discreto está relacionada à propriedade de admissibilidade das estratégias de negociação. Uma estratégia $\varphi$ é dita *a-admissible* se seu processo de valor $V(\varphi)$ for uniformemente limitado inferiormente por $-a$ [^14]. Para uma estratégia auto-financiável $\varphi = (V_0, \theta)$, temos $V_k(\varphi) = V_0 + G_k(\theta) = V_0 + (\theta \bullet S)_k$ [^10]. A condição de admissibilidade impõe, portanto, um limite inferior uniforme sobre a integral estocástica (mais uma constante inicial).

O seguinte teorema, referido como Teorema 3.3 no contexto, formaliza esta ligação.

> **Teorema 3.3:** Suponha que $X$ é um $\mathbb{R}^d$-valued local Q-martingale nulo em 0 [^23] e $\theta$ é um $\mathbb{R}^d$-valued predictable process. Se a integral estocástica $\theta \bullet X$ é **uniformly bounded below** (i.e., $(\theta \bullet X)_k \ge -b$ Q-a.s. para todo $k$, com uma constante $b \ge 0$ [^14]), então $\theta \bullet X$ é um Q-martingale [^15].

*Prova:* A prova deste resultado baseia-se numa propriedade fundamental dos local martingales em tempo discreto: um local Q-martingale $L=(L_k)_{k \in \mathbb{N}_0}$ que é uniformemente bounded below (e satisfaz $E_Q[|L_0|] < \infty$) é, na verdade, um verdadeiro Q-martingale (sob condições de integrabilidade apropriadas para horizontes finitos, como $E_Q[|L_T|] < \infty$, o que é garantido se $L = \theta \bullet X$ for bounded below e $X$ for um martingale, ou através da localização se $X$ for local martingale) [^16]. O contexto referencia Föllmer/Schied [9, Theorem 5.15] para uma discussão mais geral [^16]. Dado que $\theta \bullet X$ é um local Q-martingale pelo Teorema 3.1 e é uniformemente bounded below por hipótese, ele deve ser um Q-martingale. $\blacksquare$

Este teorema é descrito como "extremamente útil" [^17], pois conecta a noção financeira de estratégias admissíveis (que evitam dívidas arbitrariamente grandes, garantindo que $V(\varphi)$ seja bounded below) [^14] com a propriedade matemática mais forte de ser um verdadeiro martingale, essencial para muitos resultados teóricos em finanças matemáticas.

### Conclusão

Neste capítulo, exploramos propriedades cruciais da integral estocástica $\theta \bullet X$ no contexto de processos $X$ que são martingales ou local martingales, utilizando exclusivamente as definições e resultados apresentados no material de referência. Vimos, através do Teorema 3.1 [^5], que a integral estocástica preserva a propriedade de local martingale sob a condição de previsibilidade do integrando $\theta$. Quando $\theta$ é adicionalmente bounded e $X$ é um martingale, $\theta \bullet X$ herda a propriedade de martingale. O Corolário 3.2 [^10] demonstrou a robustez da propriedade de martingale sob a operação de parada em um stopping time $\tau$, um resultado derivado diretamente do Teorema 3.1 [^11]. Finalmente, o Teorema 3.3 [^15] forneceu uma condição suficiente vital, a limitação inferior uniforme, para que a integral estocástica de um local martingale seja um verdadeiro martingale. Estes resultados são pilares na teoria de precificação de ativos e gestão de risco em tempo discreto, pois governam o comportamento dos ganhos de estratégias de negociação [^19] em mercados modelados por (local) martingales, reforçando a noção de *fair game* [^1], [^12], [^13] e sua relação com estratégias admissíveis [^14], [^17].

### Referências

[^1]: Um (real-valued) stochastic process $X = (X_k)_{k=0,1,...,T}$ é chamado de **martingale** (com respeito a Q e $\mathbb{F}$) se for adaptado a $\mathbb{F}$, for Q-integrável no sentido que $X_k \in L^1(Q)$ para cada $k$, e satisfizer a **martingale property** $E_Q[X_l | \mathcal{F}_k] = X_k$ Q-a.s. para $k \le l$. (p. 21)
[^2]: Um processo adaptado $X = (X_k)_{k=0,1,...,T}$ nulo em 0 (i.e. com $X_0 = 0$) é chamado de **local martingale** (com respeito a Q e $\mathbb{F}$) se existir uma sequência de stopping times $(\tau_n)_{n \in \mathbb{N}}$ crescente para $T$ tal que para cada $n \in \mathbb{N}$, o stopped process $X^{\tau_n} = (X_{k \wedge \tau_n})_{k=0,1,...,T}$ é um (Q, $\mathbb{F}$)-martingale. Chamamos $(\tau_n)_{n \in \mathbb{N}}$ de **localising sequence**. (p. 22)
[^3]: Um processo estocástico $X$ é chamado **predictable** (com respeito a $\mathbb{F}$) if each $X_k$ is even $\mathcal{F}_{k-1}$-measurable, for $k = 1,..., T$. (p. 1)
[^4]: A integral estocástica $\theta \bullet X$ é definida por $(\theta \bullet X)_k := \sum_{j=1}^k \theta_j^T \Delta X_j$ for $k = 0, 1, ..., T$. (p. 18, adaptado de G(θ) na p.13)
[^5]: **Theorem 3.1.** Suppose $X = (X_k)_{k=0,1,...,T}$ is an $\mathbb{R}^d$-valued martingale or local martingale null at 0. For any $\mathbb{R}^d$-valued predictable process $\theta$, the stochastic integral process $\theta \bullet X$ [...] is then a (real-valued) local martingale null at 0. If $X$ is a martingale and $\theta$ is bounded, then $\theta \bullet X$ is even a martingale. (p. 18-19)
[^6]: *Proof of Theorem 3.1 (bounded case):* $E_Q[\theta \bullet X_{k+1} - \theta \bullet X_k | \mathcal{F}_k] = E_Q[\theta_{k+1}^T \Delta X_{k+1} | \mathcal{F}_k] = \theta_{k+1}^T E_Q[\Delta X_{k+1} | \mathcal{F}_k] = 0$ again because $X^i$ is a Q-martingale. So $\theta \bullet X$ also has the martingale property. (p. 19)
[^7]: *Proof of Theorem 3.1 (general case mention):* Because $\theta$ is predictable, $\sigma_n := \inf\\{k : |\theta_{k+1}| > n\\} \wedge T$ is a stopping time... So if $(\tau_n)_{n \in \mathbb{N}}$ is a localising sequence for X, one can easily check... that $\tau\'_n := \tau_n \wedge \sigma_n$ yields a localising sequence for $\theta \bullet X$. (p. 19)
[^8]: $\tau : \Omega \to \\{0, 1, ..., T\\}$ satisfies $\\{\tau \le j\\} \in \mathcal{F}_j$ for all $j$. (p. 13)
[^9]: If $\tau$ is any stopping time, then $\theta_k := I_{\\{k \le \tau\\}}$ is predictable, and of course bounded. (p. 19, note: $I_{\\{k \le \tau\\}}$ is $\mathcal{F}_{k-1}$-measurable because $\\{k \le \tau\\} = \\{\tau \ge k\\} = \\{\tau \le k-1\\}^c \in \mathcal{F}_{k-1}$)
[^10]: **Corollary 3.2.** For any martingale $X$ and any stopping time $\tau$, the stopped process $X^\tau$ is again a martingale. In particular, $E_Q[X_{k \wedge \tau}] = E_Q[X_0]$ for all k. (p. 19)
[^11]: So if we note that $\theta \bullet X = X^\tau - X_0$ [with $\theta_k = I_{\\{k \le \tau\\}}$], an immediate consequence of Theorem 3.1 is [Corollary 3.2]. (p. 19)
[^12]: *Interpretation:* Corollary 3.2 says that one cannot change this fundamental character [of a martingale as a fair game] by cleverly stopping the game... (p. 20)
[^13]: *Interpretation:* ...and Theorem 3.1 says that as long as one can only use information from the past, not even complicated clever betting (in the form of trading strategies) will help. (p. 20)
[^14]: For $a \ge 0$, a trading strategy $\varphi$ is called **a-admissible** if its value process $V(\varphi)$ is uniformly bounded from below by $-a$, i.e. $V(\varphi) \ge -a$ in the sense that $V_k(\varphi) \ge -a$ P-a.s. for all $k$. (p. 16) / ...stochastic integral process $\theta \bullet X$ is **uniformly bounded below** (i.e. $(\theta \bullet X)_k \ge -b$ Q-a.s. for all k, with a constant $b \ge 0$). (p. 20)
[^15]: **Theorem 3.3.** Suppose that $X$ is an $\mathbb{R}^d$-valued local Q-martingale null at 0 and $\theta$ is an $\mathbb{R}^d$-valued predictable process. If the stochastic integral process $\theta \bullet X$ is uniformly bounded below [...], then $\theta \bullet X$ is a Q-martingale. (p. 20)
[^16]: *Proof [of Thm 3.3]:* See Föllmer/Schied [9, Theorem 5.15]. A bit more generally, this relies on the result that in discrete (possibly infinite) time, a local martingale that is uniformly bounded below is a true martingale. More precisely: If $L = (L_k)_{k \in \mathbb{N}_0}$ is a local Q-martingale with $E_Q[|L_0|] < \infty$ and $T \in \mathbb{N}$ is such that $E_Q[|L_T|] < \infty$, then the stopped process $L^T = (L_k)_{k=0,1,...,T}$ is a Q-martingale. (p. 20) *[Note: The text states L^T is a Q-martingale, likely meaning L restricted to [0,T] under the stated conditions. The key principle is uniform boundedness below implies true martingale in discrete time.]*
[^17]: We shall see later that Theorem 3.3 is extremely useful. (p. 20)
[^18]: A stochastic process $X$ is called **adapted** (to $\mathbb{F}$) if each $X_k$ is $\mathcal{F}_k$-measurable. (p. 1)
[^19]: Note that if we think of $X=S$ as discounted asset prices, then $\theta \bullet S = G(\theta)$ is the discounted gains process of the self-financing strategy $\varphi \cong (0, \theta)$. (p. 19, referencing G(θ) on p. 13)
[^20]: ...is Q-integrable in the sense that $X_k \in L^1(Q)$ for each k... (p. 21)
[^21]: The "stochastic process" $S^\tau = (S^\tau_k)_{k=0,1,...,T}$ defined by $S^\tau_k(\omega) := S_{k \wedge \tau(\omega)}(\omega)$. (p. 17) / ...the stopped process $X^\tau = (X_{k \wedge \tau_n})_{k=0,1,...,T}$... (p. 22)
[^22]: An $\mathbb{R}^d$-valued process $X$ is a martingale if each coordinate $X^i$ is a martingale. (p. 21)
[^23]: An adapted process $X = (X_k)_{k=0,1,...,T}$ null at 0 (i.e. with $X_0 = 0$) is called a local martingale... (p. 22) / Theorem 3.1. Suppose $X = (X_k)_{k=0,1,...,T}$ is an $\mathbb{R}^d$-valued martingale or local martingale null at 0. (p. 18) / Theorem 3.3. Suppose that $X$ is an $\mathbb{R}^d$-valued local Q-martingale null at 0... (p. 20)
[^24]: But $\theta_{k+1}$ is bounded and $\mathcal{F}_k$-measurable because $\theta$ is predictable... (p. 19, proof uses $\mathcal{F}_k$-measurability of $\theta_{k+1}$)

<!-- END -->